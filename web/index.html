<!-- This is mainly users' input page -->

<!DOCTYPE HTML> 
<html lang="en-US">
<head>
    <title>Moto Demo Dev</title>
    <meta charset="UTF-8">
    <meta name="author" content="Ning Li">
    <meta name="description" 
    content="Demo of countermeasures for protecting Primary User privacy in spectrum sharing">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <!-- Javascript google map api -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.exp&libraries=drawing"></script>
    <!-- Custom files -->
    <script type="text/javascript" src="googlemap.js"></script>
    <script type="text/javascript" src="channels.js"></script>
    <script type="text/javascript" src="countermeasure.js"></script>
    <script type="text/javascript" src="queryOpt.js"></script>
    <script type="text/javascript" src="params.js"></script>
    <script type="text/javascript" src="gridSize.js"></script>
</head>

<script type="text/javascript">
google.maps.event.addDomListener(window, 'load', initialize);
</script>

<body>
<div class="container">
    <div class="jumbotron">
        <h2>Moto demo</h2>      
        <p>
            This is a demo of techniques for protecting the Primary Users’ operational privacy in spectrum sharing 
            proposed in the paper: 
        </p>
        <p>
            <cite>
                Protecting the Primary Users’ Operational Privacy in Spectrum Sharing. 
                <small>[2014 IEEE International Symposium on Dynamic Spectrum Access Networks (DYSPAN), p 236-47, 2014]</small>
            </cite>
        </p>
    </div>

    <!-- dropdown specifying channels -->
    <h4>Select number of channels</h4>
    <div class="row">
        <div class="col-md-2 btn-group dropdown">
            <button id="channelButton" class="btn btn-default" style="width:80%">1</button>
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" style="width:20%">
                <span class="caret"></span></button>
                <ul id="dp" class="dropdown-menu" style="width: 100%; text-align: center;">
                    <li><a>1</a></li>
                    <li><a>2</a></li>
                    <li><a>3</a></li>
                </ul>
        </div>
    </div>

    <!-- Cell size -->
    <h4>Specify grid size</h4>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <div class="col-md-2">
                <input class="form-control" id="cd" min="0.005" max="0.05" step="0.001" placeholder="0.005" style="text-align:center;" onchange="adjustGridSize();">
            </div>
            <a href="#" data-toggle="qtip" title="Simulation treats selected area as grid of cells. Grid size determines size of each cell and is specified in degree with earth based coordinates. Maximum cell size is 0.05 (about 5 km) and minimum cell size is 0.005 (about 500 m). To achieve more accuracy, we recommend defalut value 0.005 degree for cell size.">
                <span class="glyphicon glyphicon-info-sign"></span>
            </a>
        </div>
    </form>

    <!-- google map -->
    <h4>Draw analysis area and pick location of primary users</h4> 
    <div id="mapArea">
        <button type='button' class='btn btn-warning' onclick='resetAllMarkers();'>Reset</button>
        <span class="help-block">Click rectangle icon to draw analysis area</span>
        <div id='map-canvas' style='width:100%; height:500px;'></div>
    </div>

    <!-- choose countermeasure -->
    <br>
    <h4>Choose countermeasures</h4>
    <div class="row">
        <div class="col-md-6"><h5>Inaccuracy vs Queries</h5></div>
        <div class="col-md-3">
            <h5>Probability on Google Maps<a href="#" data-toggle="qtip" title="Plot attacker's speculation of primary users location on Google Maps.">
                <span class="glyphicon glyphicon-info-sign"></span>
            </a></h5>
        </div>
        <div class="col-md-3">
            <h5>Trade-off<a href="#" data-toggle="qtip" title="Plot inaccuracy vs different parameter of countermeasures. This option is not available to K anonymity and K clustering technique, because inaccuracy is more relevant to the distribution of primary users, rather than the value of k in their cases.">
                <span class="glyphicon glyphicon-info-sign"></span>
            </a></h5>
        </div>
    </div>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <div class="col-md-2 checkbox">
                <label><input type="checkbox" id="cmopt0" onchange="enableInput('cmval0');">No countermeasure</label>
            </div>
            <div class="col-md-4 checkbox" id="emptyDiv"> 
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="gmno" onchange="plotGMap('gmno');">Plot on Google Maps</label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-2 checkbox">
              <label><input type="checkbox" id="cmopt1" onchange="enableInput('cmval1');">Additive Noise</label>
            </div>
            <div class="col-md-4"> 
                <input type="number" class="form-control" id="cmval1" min="0.0" max="1.0" step="0.1" placeholder="Noise level" style="text-align:center;" disabled onchange="adjustNoiseLevel();">
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="gmad" onchange="plotGMap('gmad');">Plot on Google Maps</label>
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="tradeOff1" onchange="tradeOffCurve('tradeOff1')">Include trade-off curve</label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-2 checkbox">
                <label><input type="checkbox" id="cmopt2" onchange="enableInput('cmval2');">Transfiguration</label>
            </div>
            <div class="col-md-4">
                <input type="number" class="form-control" id="cmval2" min="3" placeholder="Sides for convex polygon" style="text-align:center;" disabled onchange="adjustNumberOfSides();">
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="gmtf" onchange="plotGMap('gmtf');">Plot on Google Maps</label>
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="tradeOff2" onchange="tradeOffCurve('tradeOff2')">Include trade-off curve</label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-2 checkbox">
                <label><input type="checkbox" id="cmopt3" onchange="enableInput('cmval3');">K-Anonymity</label>
            </div>
            <div class="col-md-4"> 
                <input type="number" class="form-control" id="cmval3" min="1" placeholder="K for K-Anonymity" style="text-align:center;" disabled onchange="adjustKAnonymity();">
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="gmka" onchange="plotGMap('gmka');">Plot on Google Maps</label>
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="tradeOff3" onchange="tradeOffCurve('tradeOff3')">Include trade-off bar</label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-2 checkbox">
                <label><input type="checkbox" id="cmopt4" onchange="enableInput('cmval4');">K-Clustering</label>
            </div>
            <div class="col-md-4"> 
                <input type="number" class="form-control" id="cmval4" min="1" placeholder="K for K-Clustering" style="text-align:center;" disabled onchange="adjustKClustering();">
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="gmkc" onchange="plotGMap('gmkc');">Plot on Google Maps</label>
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="tradeOff4" onchange="tradeOffCurve('tradeOff4')">Include trade-off bar</label>
            </div>
        </div>
    </form>

    <!-- Choose method of queries -->
    <h4>Specify queries</h4>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <div class="col-md-2 radio">
                <label><input type="radio" id="input_query0" name="input_query" onchange="enableRandomQueries();" checked>Random queries</label>
            </div>
            <div class="col-md-4"> 
                <input class="form-control" id="randomQuery" placeholder="Number of queries" min="10" step="10" max="500" style="text-align:center;" onchange="adjustValue();">
            </div>
            <a href="#" data-toggle="qtip" title="Query numbers are rounded as multiple of 10, with maximum 500 times.">
                <span class="glyphicon glyphicon-info-sign"></span>
            </a>
        </div>
        <div class="form-group">
            <div class="col-md-2 radio">
                <label><input type="radio" id="input_query1" name="input_query" onchange="disableRandomQueries();">Upload query location</label>
            </div>
            <div class="col-md-4">
                <input type="file" class="form-control" id="file-select" name="uploadthisfile">
            </div>
            <div class="col-md-4">
                <button type="submit" class="btn btn-default" id="upload-button" onclick="uploadfile(); return false;">Upload</button>
            </div>
        </div>
    </form>

    <h4>Send results</h4>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <div class="col-md-2 control-label" for="email">Email:</div>
            <div class="col-md-4">
                <input type="email" class="form-control" id="email" placeholder="your email address" style="text-align:center;">
            </div>
            <div class="col-md-3 checkbox">
                <label><input type="checkbox" id="inputParams">Include input parameters</label>
                <a href="#" data-toggle="qtip" title="Check this to include above parameters you have chosen in the email.">
                    <span class="glyphicon glyphicon-info-sign"></span>
                </a>
            </div>
        </div>
    </form>

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h3 class="modal-title">Confirm parameters</h3>
            </div>
            <div class="modal-body">
                <h4>Number of channels</h4>
                <div class="well" id="wellchannel"></div>
                <h4>Analysis region</h4>
                <div class="well" id="wellregion"></div>
                <h4>Location of primary users</h4>
                <div class="well" id="wellpu"></div>
                <h4>Countermeasure</h4>
                <div class="well" id="wellcm"></div>
                <h4>Queries</h4>
                <div class="well" id="wellquery"></div>
                <h4>Email</h4>
                <div class="well" id="wellemail"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="sendParams();">Launch</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
          </div>   
        </div>
    </div>
    <br>
    <!-- result of passed params -->
    <button type="submit" class="btn btn-primary btn-lg" style="float: right;" onclick="getParams();">Start demo <span class="glyphicon glyphicon-play"></span></button>
    <br><br><br><br>
</div>

</body>
</html>