<!-- This is mainly users' input page -->

<!DOCTYPE HTML> 
<html lang="en-US">
<head>
    <title>Moto Demo</title>
    <meta charset="UTF-8">
    <meta name="author" content="Ning Li">
    <meta name="description" 
    content="Demo of countermeasures for protecting Primary User privacy in spectrum sharing">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
   <!--  // <script src="http://maps.googleapis.com/maps/api/js"></script> -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.exp&libraries=drawing"></script>
    <!-- Custom styles for this template -->
    <link href="sticky-footer.css" rel="stylesheet">
</head>

<style type="text/css">
#cmval, #queries {
    border-left-width: 1px;
    margin-left: 10px;  
    text-align: center;
}
</style>

<script type="text/javascript">
var map;                         // google map instance
var drawingManager;              // helper object for drawing shapes on google map
var lastShape; var recRegion;    // rectangle object and its boundary
var myCenter = new google.maps.LatLng(37.227799, -80.422054); // center for google map region
var numberOfChannels = 1;; var chanls; // number of channels & user selected channel
var markers_one = [];            // channel for 1 channel
var markers_two_channel0 = [];   // channel 0 for 2 channels
var markers_two_channel1 = [];   // channel 1 for 2 channels
var markers_three_channel0 = []; // channel 0 for 3 channels
var markers_three_channel1 = []; // channel 1 for 3 channels
var markers_three_channel2 = []; // channel 2 for 3 channels
/*
 * Initialize google map
 */
function initialize() {
    try {
        // create a google map
        var mapProp = {
            zoom: 5,
            center: myCenter,
        };
        map = new google.maps.Map(document.getElementById("map-canvas"), mapProp);

        // create a drawing manager attached to the map to allow the user to draw markers, lines, and shapes.
        var shapeOptions = {
            strokeWeight: 1,
            strokeOpacity: 1,
            fillOpacity: 0.2,
            editable: true,
            clickable: false,
            strokeColor: '#3399FF',
            fillColor: '#3399FF'
        };
        drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: null,
            drawingControl: true,
            drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                drawingModes: [google.maps.drawing.OverlayType.RECTANGLE]
            },
            rectangleOptions: shapeOptions,
            map: map
        });
        // Add an event listener on the drawingManager for drawing complete
        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
            if (lastShape != undefined) {
                lastShape.setMap(null);
            }

            lastShape = e.overlay;
            lastShape.type = e.type;

            if (lastShape.type == google.maps.drawing.OverlayType.RECTANGLE) {
                lastShape.setMap(map);
                recRegion = lastShape.getBounds();
                updatebounds(recRegion);
                console.log(recRegion.toString());
            }
            drawingManager.setDrawingMode(null);
            // Add an event listener on the rectangle for bounds change
            google.maps.event.addListener(e.overlay, 'bounds_changed', function() {
                lastShape = e.overlay;
                lastShape.type = e.type;
                recRegion = lastShape.getBounds();
                updatebounds(recRegion);
                console.log("Bounds changed!");
                console.log(recRegion.toString());
            });
        });
        // Add an event listener on the map for click
        google.maps.event.addListener(map, 'click', function(event) {
            placeMarker(event.latLng);
        });
    }
    catch (err) {
        console.log("Can't deploy google map on this page");
    }
}

google.maps.event.addDomListener(window, 'load', initialize);

/*
 * Place markers on google map
 */
function placeMarker(location) {
    if (lastShape == null || recRegion == null || !recRegion.contains(location)) {
        alert("Must select location with in analysis area");
        return;
    }
    if (chanls == undefined && numberOfChannels != 1) {
        alert("Must select channels first");
        return;
    }
    var marker = new google.maps.Marker({
        position: location,
        map: map,
    });
    var infowindow = new google.maps.InfoWindow({
        content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng()
    });
    infowindow.open(map,marker);
    if (numberOfChannels == 1) markers_one.push(marker);
    if (numberOfChannels == 2) {
        if (chanls == 0) markers_two_channel0.push(marker);
        if (chanls == 1) markers_two_channel1.push(marker);
    }
    if (numberOfChannels == 3) {
        if (chanls == 0) markers_three_channel0.push(marker);
        if (chanls == 1) markers_three_channel1.push(marker);
        if (chanls == 2) markers_three_channel2.push(marker);
    }
}

// Deletes all markers in the array by removing references to them.
function hideAllMarkers() {
    for (var i = 0; i < markers_one.length; i++) {
        markers_one[i].setMap(null);
    }
    for (var i = 0; i < markers_two_channel0.length; i++) {
        markers_two_channel0[i].setMap(null);
    }
    for (var i = 0; i < markers_two_channel1.length; i++) {
        markers_two_channel1[i].setMap(null);
    }
    for (var i = 0; i < markers_three_channel0.length; i++) {
        markers_three_channel0[i].setMap(null);
    }
    for (var i = 0; i < markers_three_channel1.length; i++) {
        markers_three_channel1[i].setMap(null);
    }
    for (var i = 0; i < markers_three_channel2.length; i++) {
        markers_three_channel2[i].setMap(null);
    }
}
/*
 * Delete all markers on the map
 * Delete rectangle on the map
 */
function resetAllMarkers() {
    if (lastShape != null) lastShape.setMap(null);
    recRegion = null;
    chanls = undefined;
    for (var i = 0; i < markers_one.length; i++) {
        markers_one[i].setMap(null);
    }
    markers_one = [];
    for (var i = 0; i < markers_two_channel0.length; i++) {
        markers_two_channel0[i].setMap(null);
    }
    markers_two_channel0 = [];
    for (var i = 0; i < markers_two_channel1.length; i++) {
        markers_two_channel1[i].setMap(null);
    }
    markers_two_channel1 = [];
    for (var i = 0; i < markers_three_channel0.length; i++) {
        markers_three_channel0[i].setMap(null);
    }
    markers_three_channel0 = [];
    for (var i = 0; i < markers_three_channel1.length; i++) {
        markers_three_channel1[i].setMap(null);
    }
    markers_three_channel1 = [];
    for (var i = 0; i < markers_three_channel2.length; i++) {
        markers_three_channel2[i].setMap(null);
    }
    markers_three_channel2 = [];
}

/*
 * Display markers in @markers, hinding all other markers on map
 */
function markersOnChannel(markers) {
    hideAllMarkers();
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(map);
    }
}

function updatebounds (recRegion) {
    var boundstr = "<h4>Coordinates</h4>";
    boundstr += "<div class='well'>"
    boundstr += "North latitude: " + recRegion.getNorthEast().lat() + "<br>";
    boundstr += "South latitude: " + recRegion.getSouthWest().lat() + "<br>";
    boundstr += "West longitude: " + recRegion.getSouthWest().lng() + "<br>";
    boundstr += "East longitude: " + recRegion.getNorthEast().lng() + "<br>";
    boundstr += "</div>"
    document.getElementById("showBounds").innerHTML = boundstr;
}
</script>

<script type="text/javascript">
/* 
 * Dispalying google map area in accordance with user specified number of channels
 */
function setChannels() {
    console.log("Set channels!");
    resetAllMarkers();
    var e = document.getElementById("selc");
    numberOfChannels = parseInt(e.options[e.selectedIndex].value);
    switch (numberOfChannels) {
    case 1:
        console.log("Number of channels: 1");
        var str = "<button type='button' class='btn btn-warning' onclick='resetAllMarkers();'>Reset</button>";
        str += '<span class="help-block">Click rectangle icon to draw analysis area</span>'
        str += "<div id='map-canvas' style='width:100%; height:420px;'></div>";
        document.getElementById("mapArea").innerHTML = str;
        window.onload = initialize();
        break;
    case 2:
        console.log("Number of channels: 2");
        var str = "<button type='button' class='btn btn-info' onclick='selectChannel(0);'>Select location of PU(s) for channel 0</button>";
        str += " <button type='button' class='btn btn-info' onclick='selectChannel(1);'>Select location of PU(s) for channel 1</button>";
        str += " <button type='button' class='btn btn-warning' onclick='resetAllMarkers();'>Reset</button>";
        str += '<span class="help-block">Click rectangle icon to draw analysis area</span>'
        str += "<div id='map-canvas' style='width:100%; height:420px;'></div>";
        document.getElementById("mapArea").innerHTML = str;
        window.onload = initialize();
        break;
    case 3:
        console.log("Number of channels: 3");
        var str = "<button type='button' class='btn btn-info' onclick='selectChannel(0);'>Select location of PU(s) for channel 0</button>";
        str += " <button type='button' class='btn btn-info' onclick='selectChannel(1);'>Select location of PU(s) for channel 1</button>";
        str += " <button type='button' class='btn btn-info' onclick='selectChannel(2);'>Select location of PU(s) for channel 2</button>";
        str += " <button type='button' class='btn btn-warning' onclick='resetAllMarkers();'>Reset</button>";
        str += '<span class="help-block">Click rectangle icon to draw analysis area</span>'
        str += "<div id='map-canvas' style='width:100%; height:420px;'></div>";
        document.getElementById("mapArea").innerHTML = str;
        window.onload = initialize();
        break;
    default:
        document.getElementById("mapArea").innerHTML = "<p>Unknown choice!</p>";
        break;
    }
}
/*
 * When user select a channel, display only markers on that channel while hiding all others
 */
function selectChannel (arg) {
    chanls = arg;
    if (numberOfChannels == 1) markersOnChannel(markers_one);
    if (numberOfChannels == 2 && chanls == 0) markersOnChannel(markers_two_channel0);
    if (numberOfChannels == 2 && chanls == 1) markersOnChannel(markers_two_channel1);
    if (numberOfChannels == 3 && chanls == 0) markersOnChannel(markers_three_channel0);
    if (numberOfChannels == 3 && chanls == 1) markersOnChannel(markers_three_channel1);
    if (numberOfChannels == 3 && chanls == 2) markersOnChannel(markers_three_channel2);
}
</script>

<script type="text/javascript">
/* 
 * This script is used for displaying "countermeasure" div 
 * according to user selected countermeasure
 */
function clearCounterMeasure (argument) {
    document.getElementById("countermeasure").innerHTML = "";
}

function counterFunc1() {
    var str = "";
    str += '<form class="form-inline" role="form">';
    str += '<div class="form-group" style="width: 50%">';
    str += '<label for="additive_noise">Noise Level:  </label>';
    str += '<input type="number" class="form-control" id="cmval" style="width: 30%" min="0.0" max="1.0" step="0.1" placeholder="0.5">';
    str += '</div></form>';
    document.getElementById("countermeasure").innerHTML = str;
}
function counterFunc2 () {
    var str = "";
    str += '<form class="form-inline" role="form">';
    str += '<div class="form-group">';
    str += '<label for="polygon">Sides for convex polygon:  </label>';
    str += '<input type="number" class="form-control" id="cmval" min="3" placeholder="3">';
    str += '</div></form>';
    document.getElementById("countermeasure").innerHTML = str;
}

function counterFunc3 () {
    var str = "";
    str += '<form class="form-inline" role="form">';
    str += '<div class="form-group">';
    str += '<label for="ka">K for K-Anonymity:  </label>';
    str += '<input type="number" class="form-control" id="cmval" min="1" placeholder="2">';
    str += '</div></form>';
    document.getElementById("countermeasure").innerHTML = str;
}

function counterFunc4 () {
    var str = "";
    str += '<form class="form-inline" role="form">';
    str += '<div class="form-group">';
    str += '<label for="kc">K for K-Clustering:  </label>';
    str += '<input type="number" class="form-control" id="cmval" min="1" placeholder="2">';
    str += '</div></form>';
    document.getElementById("countermeasure").innerHTML = str;
}
</script>

<script type="text/javascript">
/*
 * This script is used to display "queryingForm" div according to user's choice of query
 */
function randLoc () {
    document.getElementById("queryingForm").innerHTML = document.getElementById('randomQueries').innerHTML;
}
function upldLoc () {
    document.getElementById("queryingForm").innerHTML = document.getElementById('uploadQueries').innerHTML;
}
</script>

<script id="randomQueries" language="text">
<!-- HTML wraped as script -->
    <form class="form-inline" role="form" method="post" action="">
        <div class="form-group">
            <label>Specify number of queries: </label>
            <input type="number" class="form-control" name="queries" id="queries" placeholder="100" min="1" step="100">
        </div>
        <br>
    </form>
</script>

<script id="uploadQueries" language="text">
<!-- HTML wraped as script -->
    <form class="form-inline" role="form" method="post" action='upload.php'>
        <div class="form-group">
            <label>Browse files...</label>
            <input type="file" class="form-control" id="file-select" name="uploadthisfile">
            <button type="submit" class="btn btn-default" id="upload-button" onclick="uploadfile(); return false;">Upload</button>
        </div>
    </form>
</script>

<script type="text/javascript">
var file_name;  // file name of user uploaded text file
function uploadfile () {
    var form = document.getElementById('file-form');
    var fileSelect = document.getElementById('file-select');
    var uploadButton = document.getElementById('upload-button');
    // Update button text.
    uploadButton.innerHTML = 'Uploading...';
    // Get the selected files from the input.
    var files = fileSelect.files;
    // Create a new FormData object.
    var formData = new FormData();
    // Get the file name.
    var file = files[0];
    file_name = file.name;
    // Attach file in FormData
    formData.append('uploadthisfile', file, file.name);
    // Set up the request.
    var xhr = new XMLHttpRequest();
    // Open the connection.
    xhr.open('POST', 'upload.php', true);

    // Set up a handler for when the request finishes.
    xhr.onload = function () {
        if (xhr.status === 200) {
            alert(xhr.responseText);
            // File(s) uploaded.
            uploadButton.innerHTML = 'Upload';
        } else {
            alert('An error occurred!');
        }
    };
    // Send the Data.
    xhr.send(formData);
}
</script>

<script type="text/javascript">
var channel_number;        // number of channels
var analysis_region = [];  // region
var location_PU = [];      // pu's location
var countermeasure;        // countermeasure
var queries_number;        // number of queries
var queries_file;          // name of querying file
var args;                  // formatted params as a argument for java program
var email;                 // send result to this email

function getParams () {
    // get number of channels
    channel_number = numberOfChannels;
    if (channel_number <= 0 || channel_number > 3) {
        alert("Channel number invalid! Please check your channel selection");
        return;
    }
    console.log("Channel number: " + channel_number);
    // get region boundaries
    analysis_region = [];
    if (recRegion != null) {
        // upper lat
        analysis_region.push(recRegion.getNorthEast().lat());
        // right lng
        analysis_region.push(recRegion.getNorthEast().lng());
        // lower lat
        analysis_region.push(recRegion.getSouthWest().lat());
        // left lng
        analysis_region.push(recRegion.getSouthWest().lng());
    }
    if (channel_number == 1 && markers_one.length == 0) {
        alert("Please define working channel and location for primary user!");
        return;
    } 
    if (channel_number == 2 && markers_two_channel0.length == 0 && markers_two_channel1.length == 0) {
        alert("Please define working channel and location for primary user!");
        return;
    } 
    if (channel_number == 3 && markers_three_channel0.length == 0 && markers_three_channel1.length == 0 && markers_three_channel2.length == 0) {
        alert("Please define working channel and location for primary user!");
        return;
    }
    // get pus' location
    location_PU = [];
    if (channel_number == 1) location_PU.push(markers_one);
    if (channel_number == 2) {
        location_PU.push(markers_two_channel0);
        location_PU.push(markers_two_channel1);
    }
    if (channel_number == 3) {
        location_PU.push(markers_three_channel0);
        location_PU.push(markers_three_channel1);
        location_PU.push(markers_three_channel2);
    }

    // get countermeasure
    if (document.getElementById('cmopt0').checked) {
        countermeasure = "NO_COUNTERMEASURE";
    }
    if (document.getElementById('cmopt1').checked) {
        countermeasure = "ADDITIVE_NOISE";
    }
    if (document.getElementById('cmopt2').checked) {
        countermeasure = "TRANSFIGURATION";
    }
    if (document.getElementById('cmopt3').checked) {
        countermeasure = "K_ANONYMITY";
    }
    if (document.getElementById('cmopt4').checked) {
        countermeasure = "K_CLUSTERING";
    }

    if (countermeasure == "ADDITIVE_NOISE" && (document.getElementById('cmval').value > 1 || document.getElementById('cmval').value < 0)) {
        alert("Noise level should be in the range from 0 to 1 inclusively");
        return;
    }

    if (countermeasure == "TRANSFIGURATION" && document.getElementById('cmval').value < 3) {
        alert("Sides for polygon should be greater than 2");
        return;
    }

    if (countermeasure == "TRANSFIGURATION" && !(document.getElementById('cmval').value % 1 === 0)) {
        alert("Sides for polygon must be an integer");
        return;
    }

    if (countermeasure == undefined) {
        alert("Undefined countermeasure!");
        return;
    }

    // get query method
    if (document.getElementById("input_query0").checked) {
        queries_number = document.getElementById("queries").value;
        if (queries_number == "") {
            alert("Please specify number of queries!");
            return;
        }
    }
    if (document.getElementById("input_query1").checked) {
        queries_file = file_name;
        if (queries_file == null) {
            alert("Please upload a text file containing location information");
            return;
        }
    }
    if (queries_number == null && queries_file == null) {
        alert("Please specify querying method");
        return;
    }

    // get email
    email = document.getElementById("email").value;
    if (email == "" || email == null || email == undefined) {
        alert("Please provide your email address! Demo result will be sent to this address.");
        return;
    }
    if (!validateEmail(email)) {
        alert("Email address is not valid!");
        return;
    }

    // formatting params
    args = "-a " + analysis_region[0] + " " + analysis_region[3] + " " + analysis_region[2] + " " + analysis_region[1] + " ";
    args += "-c " + channel_number + " ";
    for (var i = 0; i < location_PU.length; i++) {
        args += "-C ";
        for (var j = 0; j < location_PU[i].length; j++) {
            args += location_PU[i][j].position.lat() + " " + location_PU[i][j].position.lng() + " ";
        }
    }

    switch(countermeasure) {
        case "ADDITIVE_NOISE":
            args += "-an " + document.getElementById("cmval").value + " ";
            break;
        case "TRANSFIGURATION":
            args += "-tf " + document.getElementById("cmval").value + " ";
            break;
        case "K_ANONYMITY":
            args += "-ka " + document.getElementById("cmval").value + " ";
            break;
        case "K_CLUSTERING":
            args += "-kc " + document.getElementById("cmval").value + " ";
            break;
    }

    if (queries_number != null) {
        args += "-q " + queries_number;
    }
    else {
        args += "-f " + queries_file;
    }

    args += " -e " + email;

    // output formatted args to console
    console.log("args=" + args);

    /* fill in wells */
    // number of channels
    document.getElementById("wellchannel").innerHTML = channel_number;
    // anaysis area
    var regionstr = "";
    regionstr += "North latitude: " + analysis_region[0] + "<br>";
    regionstr += "South latitude: " + analysis_region[2] + "<br>";
    regionstr += "West longitude: " + analysis_region[3] + "<br>";
    regionstr += "East longitude: " + analysis_region[1] + "<br>";
    document.getElementById("wellregion").innerHTML = regionstr;
    // location of pu
    var pustr = "";
    for (var i = 0; i < location_PU.length; i++) {
        pustr += "Primary user on channel " + i + "<br>";
        for (var j = 0; j < location_PU[i].length; j++) {
            pustr += "( " + location_PU[i][j].position.lat() + ", " + location_PU[i][j].position.lng() + " ) <br>";
        }
    }
    document.getElementById("wellpu").innerHTML = pustr;
    // countermeasure
    var cmstr = "";
    switch(countermeasure) {
        case "ADDITIVE_NOISE":
            cmstr += "Additive noise<br>Noise level: " + document.getElementById("cmval").value;
            break;
        case "TRANSFIGURATION":
            cmstr += "Transfiguration<br>Number of sides: " + document.getElementById("cmval").value;
            break;
        case "K_ANONYMITY":
            cmstr += "K anonymity<br>K: " + document.getElementById("cmval").value;
            break;
        case "K_CLUSTERING":
            cmstr += "K Clustering<br>K: " + document.getElementById("cmval").value;
            break;
        default:
            cmstr += "No countermeasure";
            break;
    }
    document.getElementById("wellcm").innerHTML = cmstr;
    // query
    var querystr = "";
    if (queries_number != null) {
        querystr = "Randomly generated location<br>Number of queries: " + queries_number;
    }
    else {
        querystr = "Use location from " + queries_file;
    }
    document.getElementById("wellquery").innerHTML = querystr;

    // email
    document.getElementById("wellemail").innerHTML = email;

    /* if everything works well, start modal */
    $('#myModal').modal({
        backdrop: true,
        keyboard: true,
        show: true
    })
}

function validateEmail(email) {
    var re = new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");
    return re.test(email);
}

function sendParams()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
    else
    {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
            var res = xmlhttp.responseText;
            if (res == "OK") {
                alert("Demo has been started successfully! The simulation will usually take about 30 seconds. Please check your email for result.\nThanks for using!");
            }
            else {
                alert("Demo failed. " + res);
            }
            // reload page
            window.location = 'index-dev.html';
        }
        if (xmlhttp.readyState == 4 && xmlhttp.status != 200)
        {
            // document.getElementById("params").innerHTML=xmlhttp.responseText;
            alert("Sorry. Failed to start demo. " + xmlhttp.status);
            // reload page
            window.location = 'index-dev.html';
        }
    }
    xmlhttp.open("POST","result-dev.php", true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("args=" + args);
}
</script>

<body>
<div class="container">
    <div class="jumbotron">
        <h2>Moto demo dev</h2>      
        <p>
            This is a demo of techniques for protecting the Primary Users’ operational privacy in spectrum sharing 
            proposed in the paper: 
        </p>
        <p>
            <cite>
                Protecting the Primary Users’ Operational Privacy in Spectrum Sharing. 
                <small>[2014 IEEE International Symposium on Dynamic Spectrum Access Networks (DYSPAN), p 236-47, 2014]</small>
            </cite>
        </p>
        <p>Life is good!</p>
    </div>

    <!-- dropdown -->
    <h4>Specify number of channels</h4>
    <form role="form">
        <div class="form-group">
            <select class="form-control" id="selc" style="width: 15%" onchange="setChannels();">
                <option class="optclass" selected="selected">1</option>
                <option class="optclass">2</option>
                <option class="optclass">3</option>
            </select>
        </div>
    </form>

    <!-- google map -->
    <h4>Specify analysis area and location of primary users</h4> 
    <div id="mapArea">
        <button type='button' class='btn btn-warning' onclick='resetAllMarkers();'>Reset</button>
        <span class="help-block">Click rectangle icon to draw analysis area</span>
        <div id='map-canvas' style='width:100%; height:420px;'></div>
    </div>
    <div id="showBounds"></div>

    <!-- choose countermeasure -->
    <form role="form">
        <h4>Choose countermeasure</h4>
        <div class="radio">
          <label><input type="radio" id="cmopt0" name="cmopt" value=0 checked="checked" onchange="clearCounterMeasure();">No countermeasure</label>
        </div>
        <div class="radio">
          <label><input type="radio" id="cmopt1" name="cmopt" value=1 onchange="counterFunc1();">Additive Noise</label>
        </div>
        <div class="radio">
          <label><input type="radio" id="cmopt2" name="cmopt" value=2 onchange="counterFunc2();">Transfiguration</label>
        </div>
        <div class="radio">
          <label><input type="radio" id="cmopt3" name="cmopt" value=3 onchange="counterFunc3();">K-Anonymity</label>
        </div>
        <div class="radio">
          <label><input type="radio" id="cmopt4" name="cmopt" value=4 onchange="counterFunc4();">K-Clustering</label>
        </div>
    </form>

    <div id="countermeasure"></div>

    <form role="form">
        <h4>Specify queries</h4>
        <div class="radio">
          <label><input type="radio" id="input_query0" name="input_query" value="0" onchange="randLoc();">Generate query locations randomly</label>
        </div>
        <div class="radio">
          <label><input type="radio" id="input_query1" name="input_query" value="1" onchange="upldLoc();">Upload text files specifing query locations</label>
        </div>
    </form>

    <div id="queryingForm"></div>

    <form class="form-inline" role="form">
        <h4>Send result to this email</h4>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" class="form-control" style="margin-left: 10px" id="email" placeholder="example@vt.edu">
        </div>
    </form>

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h3 class="modal-title">Confirm parameters</h3>
            </div>
            <div class="modal-body">
                <h4>Number of channels</h4>
                <div class="well" id="wellchannel"></div>
                <h4>Analysis region</h4>
                <div class="well" id="wellregion"></div>
                <h4>Location of primary users</h4>
                <div class="well" id="wellpu"></div>
                <h4>Countermeasure</h4>
                <div class="well" id="wellcm"></div>
                <h4>Queries</h4>
                <div class="well" id="wellquery"></div>
                <h4>Email</h4>
                <div class="well" id="wellemail"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="sendParams();">Launch</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
          </div>   
        </div>
    </div>
    <br>
    <!-- result of passed params -->
    <button type="submit" class="btn btn-primary btn-lg" style="float: right;" onclick="getParams();">Start demo <span class="glyphicon glyphicon-play"></span></button>
    <br><br><br><br>
</div>

<footer class="footer">
    <div class="container" id="fter" style="margin-right: 55px">
        <p class="text-muted" style="text-align: right"><a href="#" style="padding-right: 10px;">Contact us</a></p>
    </div>
</footer>

</body>
</html>